# Implementation Plan

- [x] 1. プロジェクト基盤とSPMパッケージ構造の設定
  - [x] Xcodeプロジェクトの作成とiOS 17.0ターゲット設定
  - [x] ShimaenagaGameCoreローカルSPMパッケージの作成と設定
  - [x] Package.swiftの設定とSwiftTestingの依存関係追加
  - [x] 基本的なフォルダ構造とファイル配置の実装
  - _Requirements: 6.2, 6.3_

- [ ] 2. コアデータモデルの実装（TDD）
  - [ ] 2.1 ShimaenagaPetモデルの基本構造実装
    - ShimaenagaPet構造体の定義（Codable, Sendable準拠）
    - GrowthStage列挙型の実装
    - 基本プロパティ（name, growthStage, status levels）の定義
    - SwiftTestingを使用した単体テストの作成
    - _Requirements: 1.1, 1.4, 4.1_

  - [ ] 2.2 ゲームロジック基盤クラスの実装
    - GameLogic構造体の作成
    - feedPet, playWithPet, updatePetStatusメソッドの実装
    - 時間ベースのステータス減衰ロジックの実装
    - 各メソッドに対するSwiftTestingテストの作成
    - _Requirements: 2.1, 2.2, 2.3, 3.1, 3.3_

  - [ ] 2.3 成長システムとビジネスルールの実装
    - GrowthRules構造体の実装
    - 成長条件判定ロジック（時間、ステータス要件）の実装
    - canPetGrowメソッドとgrowPetメソッドの実装
    - 成長システムの包括的なテストスイートの作成
    - _Requirements: 1.1, 1.4, 8.2, 8.3_

- [ ] 3. SwiftDataモデルとデータ永続化の実装
  - [ ] 3.1 SwiftDataモデルクラスの作成
    - @Modelマクロを使用したGameState, RoomDecoration, PhotoMemoryクラスの実装
    - モデル間のリレーションシップ設定
    - ModelContainerとModelConfigurationの設定
    - _Requirements: 5.1, 5.2, 5.4, 7.1, 7.2_

  - [ ] 3.2 データ管理レイヤーの実装
    - DataManager構造体の実装
    - SwiftDataからShimaenagaGameCoreモデルへの変換ロジック
    - データの保存・読み込み・更新処理の実装
    - データ永続化のテスト作成
    - _Requirements: 8.1, 8.4_

- [ ] 4. メインゲーム画面のSwiftUIビュー実装
  - [ ] 4.1 基本的なMainGameViewの作成
    - SwiftUIビューの基本構造実装
    - @Observableを使用したGameViewModelの作成
    - ShimaenagaGameCoreパッケージとの統合
    - 基本的なレイアウト（VStack, HStack）の実装
    - _Requirements: 4.1, 4.2_

  - [ ] 4.2 シマエナガキャラクター表示の実装
    - ShimaenagaViewコンポーネントの作成
    - 成長段階に応じた画像表示ロジック
    - タップインタラクション（反応アニメーション）の実装
    - キャラクターの基本アニメーション（浮遊効果）の追加
    - _Requirements: 1.1, 1.4, 3.1, 3.4_

  - [ ] 4.3 ステータス表示UIの実装
    - StatusBarViewコンポーネントの作成
    - 満腹度、幸福度、健康度のプログレスバー実装
    - 子ども向けアイコン（ハート、星、笑顔）の統合
    - ステータス変化時のアニメーション効果
    - _Requirements: 4.1, 4.2, 4.3, 4.4_

- [ ] 5. アクションボタンとインタラクション機能の実装
  - [ ] 5.1 エサやり機能の実装
    - エサやりボタンのUI作成（大きなタップエリア、アイコン+テキスト）
    - エサやりアニメーションの実装（phaseAnimatorを使用）
    - GameViewModelでのfeedPetメソッド統合
    - エサやり後のステータス更新とUI反映
    - _Requirements: 2.1, 2.2, 2.3, 6.2_

  - [ ] 5.2 遊び機能とミニゲームの実装
    - 遊びボタンのUI作成
    - 簡単なタップゲーム（連続タップでハピネス上昇）の実装
    - 遊びアニメーション（bouncy, spring効果）の追加
    - 遊び後の幸福度更新とフィードバック表示
    - _Requirements: 3.1, 3.2, 3.3, 3.4_

  - [ ] 5.3 写真撮影機能の実装
    - 写真撮影ボタンのUI作成
    - スクリーンショット撮影機能の実装
    - PhotoMemoryモデルへの写真データ保存
    - 撮影成功時のフィードバックアニメーション
    - _Requirements: 7.1, 7.2_

- [ ] 6. 成長システムとアニメーションの実装
  - [ ] 6.1 孵化アニメーションの実装
    - 卵から孵化するphaseAnimatorアニメーション
    - 複数段階のアニメーション（egg → cracking → hatching → baby）
    - 効果音プレースホルダーの追加
    - 孵化完了時のお祝いエフェクト
    - _Requirements: 1.1, 1.3_

  - [ ] 6.2 成長段階遷移アニメーションの実装
    - 成長条件チェックの自動実行
    - 成長アニメーション（scaleEffect, rotationEffect組み合わせ）
    - 新しい見た目への変化アニメーション
    - 成長完了時のお祝い表示
    - _Requirements: 1.4, 8.2, 8.3_

- [ ] 7. 部屋デコレーション機能の実装
  - [ ] 7.1 デコレーションモードUIの作成
    - デコレーションボタンとモード切り替え機能
    - 利用可能アイテムの表示（ScrollView使用）
    - アイテム選択UI（大きなタップエリア）
    - モード終了ボタンの実装
    - _Requirements: 5.1, 5.2, 6.2_

  - [ ] 7.2 ドラッグ&ドロップ機能の実装
    - アイテムのドラッグジェスチャー実装
    - 部屋内での配置機能（座標管理）
    - 配置完了時のフィードバックアニメーション
    - 配置済みアイテムの移動・削除機能
    - _Requirements: 5.2, 5.3, 5.4_

- [ ] 8. 写真アルバム機能の実装
  - [ ] 8.1 アルバム表示UIの作成
    - PhotoAlbumViewの基本構造実装
    - LazyVGridを使用したグリッドレイアウト
    - 写真サムネイル表示機能
    - アルバム開閉のアニメーション
    - _Requirements: 7.3, 7.4_

  - [ ] 8.2 写真詳細表示機能の実装
    - 写真タップ時の拡大表示
    - 撮影日時と成長段階情報の表示
    - 拡大表示の閉じる機能
    - スワイプジェスチャーでの写真切り替え
    - _Requirements: 7.4_

- [ ] 9. 継続プレイ機能とリマインダーシステムの実装
  - [ ] 9.1 日替わりボーナスシステムの実装
    - 最終プレイ日時の記録と比較
    - 連続プレイ日数の計算とカウント
    - 日替わりボーナス（アイテムやステータス向上）の実装
    - ボーナス受け取り時のアニメーション
    - _Requirements: 8.1, 8.2, 8.3_

  - [ ] 9.2 優しいリマインダー機能の実装
    - 長期間未プレイ時のお帰りメッセージ
    - ステータス低下時の優しい通知表示
    - 子ども向けの励ましメッセージ実装
    - リマインダー表示のアニメーション
    - _Requirements: 2.4, 8.4_

- [ ] 10. エラーハンドリングと子ども向けUXの実装
  - [ ] 10.1 エラーハンドリングシステムの実装
    - GameError列挙型の実装
    - 子ども向けエラーメッセージの作成
    - エラー表示UIコンポーネントの実装
    - グレースフルデグラデーション機能の追加
    - _Requirements: 6.3, 6.4_

  - [ ] 10.2 アクセシビリティ対応の実装
    - VoiceOverサポートの追加（App Store要件）
    - アクセシビリティラベルとヒントの設定
    - Dynamic Typeサポートの実装
    - ハイコントラストモード対応
    - スイッチコントロール対応の確認
    - _Requirements: 6.2, 6.4, App Store アクセシビリティ要件_

- [ ] 11. 統合テストとパフォーマンス最適化
  - [ ] 11.1 統合テストの作成
    - メインゲームフローの統合テスト
    - データ永続化の統合テスト
    - アニメーション中のパフォーマンステスト
    - メモリリーク検出テストの実装
    - _Requirements: 全体的な品質保証_

  - [ ] 11.2 パフォーマンス最適化
    - アニメーション中のフレームレート最適化（60FPS維持）
    - メモリ使用量の最適化（50MB以下目標）
    - アプリ起動時間の短縮（2秒以内目標）
    - バッテリー消費の最適化
    - App Store審査用のパフォーマンス指標確認
    - _Requirements: パフォーマンス目標達成、App Store品質要件_

- [ ] 12. アプリストア申請準備
  - [ ] 12.1 アプリアイコンとアセットの作成
    - 1024x1024のアプリアイコン作成（シマエナガをモチーフ）
    - 各サイズのアプリアイコン生成（20pt〜1024pt）
    - LaunchScreenの実装（シンプルなシマエナガロゴ）
    - アプリ内で使用する画像アセットの最適化
    - _Requirements: アプリストア要件準拠_

  - [ ] 12.2 プライバシーポリシーとApp Store情報の準備
    - プライバシーポリシーの作成（データ収集なし、完全オフライン）
    - App Store Connect用のアプリ説明文作成（日本語）
    - キーワード設定（シマエナガ、育成ゲーム、子ども向け）
    - スクリーンショット撮影（iPhone、iPad各サイズ）
    - アプリプレビュー動画の作成（30秒以内）
    - _Requirements: マーケティング要件_

  - [ ] 12.3 年齢制限とペアレンタルコントロール対応
    - App Store年齢制限設定（4+推奨）
    - 子ども向けアプリとしての安全性確認
    - 不適切なコンテンツがないことの確認
    - 外部リンクや課金要素がないことの確認
    - _Requirements: 6.1, 6.4_

- [ ] 13. 品質保証とテスト
  - [ ] 13.1 デバイス互換性テスト
    - iPhone SE（第3世代）での動作確認
    - iPhone 15 Pro Maxでの動作確認
    - iPad（第10世代）での動作確認
    - iPad Pro 12.9インチでの動作確認
    - 各デバイスでのパフォーマンステスト
    - _Requirements: デバイス対応要件_

  - [ ] 13.2 iOS バージョン互換性テスト
    - iOS 17.0での動作確認
    - iOS 17.1以降での動作確認
    - 新しいiOSバージョンでの互換性テスト
    - SwiftData、@Observable等の新機能動作確認
    - _Requirements: OS対応要件_

  - [ ] 13.3 App Store Review Guidelines準拠確認
    - ガイドライン2.1（アプリの完成度）の確認
    - ガイドライン2.3（正確なメタデータ）の確認
    - ガイドライン4.0（デザイン）の確認
    - ガイドライン5.1（プライバシー）の確認
    - クラッシュやバグがないことの最終確認
    - _Requirements: App Store承認要件_

- [ ] 14. リリース準備とデプロイメント
  - [ ] 14.1 証明書とプロビジョニングプロファイルの設定
    - Apple Developer Program登録確認
    - Distribution証明書の作成
    - App Store用プロビジョニングプロファイルの作成
    - Bundle IDの設定と確認
    - _Requirements: 配布要件_

  - [ ] 14.2 App Store Connect設定
    - アプリ情報の入力（名前、説明、カテゴリ）
    - 価格設定（無料アプリとして設定）
    - 利用可能地域の設定（日本を含む主要国）
    - 年齢制限の設定（4+）
    - レビュー用ノートの作成
    - _Requirements: 配布設定_

  - [ ] 14.3 最終ビルドとアップロード
    - Release設定でのビルド最適化
    - アーカイブの作成とValidation実行
    - App Store Connectへのアップロード
    - TestFlightでの最終動作確認
    - App Storeレビューへの提出
    - _Requirements: リリース実行_

- [ ] 15. ポストリリース対応準備
  - [ ] 15.1 ユーザーサポート体制の構築
    - サポートメールアドレスの設定
    - よくある質問（FAQ）の準備
    - ユーザーフィードバック収集方法の確立
    - バグレポート対応フローの作成
    - _Requirements: サポート体制_

  - [ ] 15.2 アップデート計画の策定
    - 新機能追加のロードマップ作成
    - バグ修正対応の優先順位設定
    - 季節イベント機能の検討
    - ユーザーフィードバックに基づく改善計画
    - _Requirements: 継続的改善_

- [ ] 16. 最終的な統合とポリッシュ
  - [ ] 16.1 全機能の統合テスト
    - エンドツーエンドのゲームプレイテスト
    - 各成長段階での機能確認
    - データ永続化の完全性確認
    - アニメーションの滑らかさ確認
    - _Requirements: 全要件の最終確認_

  - [ ] 16.2 UI/UXの最終調整
    - 子ども向けUIの最終調整
    - アニメーションタイミングの微調整
    - 色彩とコントラストの最適化
    - 音響効果プレースホルダーの最終確認
    - App Store用スクリーンショットの最終確認
    - _Requirements: 6.1, 6.2, 6.4_